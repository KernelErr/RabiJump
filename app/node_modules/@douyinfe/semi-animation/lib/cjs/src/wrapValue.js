"use strict";

var _Object$defineProperty = require("@babel/runtime-corejs3/core-js-stable/object/define-property");

var _interopRequireDefault = require("@babel/runtime-corejs3/helpers/interopRequireDefault");

_Object$defineProperty(exports, "__esModule", {
  value: true
});

exports.default = wrapValue;

var _assign = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/object/assign"));

var _parseInt2 = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/parse-int"));

var _getEasing = _interopRequireDefault(require("./getEasing"));

var _presets = _interopRequireDefault(require("./presets"));

var _shouldUseBezier = _interopRequireDefault(require("./shouldUseBezier"));

const defaultConfig = (0, _assign.default)((0, _assign.default)({}, _presets.default.default), {
  precision: 0.01
});

function wrapValue(val) {
  let config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  if ((0, _shouldUseBezier.default)(config)) {
    const easing = (0, _getEasing.default)(config.easing);
    const duration = typeof config.duration === 'number' && config.duration > 0 ? config.duration : 1000;
    config = (0, _assign.default)((0, _assign.default)({}, config), {
      easing,
      duration
    });
  }

  let wrapped = (0, _assign.default)((0, _assign.default)((0, _assign.default)({}, defaultConfig), config), {
    done: false
  });

  if (val && typeof val === 'object' && 'val' in val) {
    if ((0, _shouldUseBezier.default)(val)) {
      const easing = (0, _getEasing.default)(val.easing);
      const duration = typeof val.duration === 'number' && val.duration > 0 ? val.duration : (0, _parseInt2.default)(config.duration) || 1000;
      val = (0, _assign.default)((0, _assign.default)({}, val), {
        easing,
        duration
      });
    }

    wrapped = (0, _assign.default)((0, _assign.default)({}, wrapped), val);
  } else {
    wrapped = (0, _assign.default)((0, _assign.default)({}, wrapped), {
      val
    });
  }

  return wrapped;
}